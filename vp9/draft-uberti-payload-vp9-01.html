<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>RTP Payload Format for VP9 Video</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
      /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
      a.info {
          /* This is the key. */
          position: relative;
          z-index: 24;
          text-decoration: none;
      }
      a.info:hover {
          z-index: 25;
          color: #FFF; background-color: #900;
      }
      a.info span { display: none; }
      a.info:hover span.info {
          /* The span will display just on :hover state. */
          display: block;
          position: absolute;
          font-size: smaller;
          top: 2em; left: -5em; width: 15em;
          padding: 2px; border: 1px solid #333;
          color: #900; background-color: #EEE;
          text-align: left;
      }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  max-width: 55em;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents"/>
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction"/>
<link href="#rfc.section.2" rel="Chapter" title="2 Conventions, Definitions and Acronyms"/>
<link href="#rfc.section.3" rel="Chapter" title="3 Media Format Description"/>
<link href="#rfc.section.4" rel="Chapter" title="4 Payload Format"/>
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 RTP Header Usage"/>
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 VP9 Payload Description"/>
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 Scalability Structure (SS):"/>
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 VP9 Payload Header"/>
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Frame Fragmentation"/>
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Examples of VP9 RTP Stream"/>
<link href="#rfc.section.5" rel="Chapter" title="5 Using VP9 with RPSI and SLI Feedback"/>
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 RPSI"/>
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 SLI"/>
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Example"/>
<link href="#rfc.section.6" rel="Chapter" title="6 Payload Format Parameters"/>
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Media Type Definition"/>
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 SDP Parameters"/>
<link href="#rfc.section.6.2.1" rel="Chapter" title="6.2.1 Mapping of Media Subtype Parameters to SDP"/>
<link href="#rfc.section.6.2.2" rel="Chapter" title="6.2.2 Offer/Answer Considerations"/>
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations"/>
<link href="#rfc.section.8" rel="Chapter" title="8 Congestion Control"/>
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations"/>
<link href="#rfc.references" rel="Chapter" title="10 References"/>
<link href="#rfc.authors" rel="Chapter"/>


  <meta name="generator" content="xml2rfc version 2.4.8 - http://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Uberti, J., Holmer, S., Flodman, M., Lennox, J., and D. Hong" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-uberti-payload-vp9-01" />
  <meta name="dct.issued" scheme="ISO8601" content="2015-3-9" />
  <meta name="dct.abstract" content="This memo describes an RTP payload format for the VP9 video codec.  The payload format has wide applicability, as it supports applications from low bit-rate peer-to-peer usage, to high bit-rate video conferences.  It includes provisions for temporal and spatial scalability." />
  <meta name="description" content="This memo describes an RTP payload format for the VP9 video codec.  The payload format has wide applicability, as it supports applications from low bit-rate peer-to-peer usage, to high bit-rate video conferences.  It includes provisions for temporal and spatial scalability." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
  <td class="left">Payload Working Group</td>
  <td class="right">J. Uberti</td>
</tr>
<tr>
  <td class="left">Internet-Draft</td>
  <td class="right">S. Holmer</td>
</tr>
<tr>
  <td class="left">Intended status: Standards Track</td>
  <td class="right">M. Flodman</td>
</tr>
<tr>
  <td class="left">Expires: September 10, 2015</td>
  <td class="right">Google</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">J. Lennox</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">D. Hong</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">Vidyo</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">March 9, 2015</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">RTP Payload Format for VP9 Video<br />
  <span class="filename">draft-uberti-payload-vp9-01</span></p>
  
  <h1 id="rfc.abstract">
  <a href="#rfc.abstract">Abstract</a>
</h1>
<p>This memo describes an RTP payload format for the VP9 video codec.  The payload format has wide applicability, as it supports applications from low bit-rate peer-to-peer usage, to high bit-rate video conferences.  It includes provisions for temporal and spatial scalability.</p>
<h1 id="rfc.status">
  <a href="#rfc.status">Status of This Memo</a>
</h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 10, 2015.</p>
<h1 id="rfc.copyrightnotice">
  <a href="#rfc.copyrightnotice">Copyright Notice</a>
</h1>
<p>Copyright (c) 2015 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a></li>
<li>2.   <a href="#rfc.section.2">Conventions, Definitions and Acronyms</a></li>
<li>3.   <a href="#rfc.section.3">Media Format Description</a></li>
<li>4.   <a href="#rfc.section.4">Payload Format</a></li>
<li>4.1.   <a href="#rfc.section.4.1">RTP Header Usage</a></li>
<li>4.2.   <a href="#rfc.section.4.2">VP9 Payload Description</a></li>
<li>4.2.1.   <a href="#rfc.section.4.2.1">Scalability Structure (SS):</a></li>
<li>4.3.   <a href="#rfc.section.4.3">VP9 Payload Header</a></li>
<li>4.4.   <a href="#rfc.section.4.4">Frame Fragmentation</a></li>
<li>4.5.   <a href="#rfc.section.4.5">Examples of VP9 RTP Stream</a></li>
<li>5.   <a href="#rfc.section.5">Using VP9 with RPSI and SLI Feedback</a></li>
<li>5.1.   <a href="#rfc.section.5.1">RPSI</a></li>
<li>5.2.   <a href="#rfc.section.5.2">SLI</a></li>
<li>5.3.   <a href="#rfc.section.5.3">Example</a></li>
<li>6.   <a href="#rfc.section.6">Payload Format Parameters</a></li>
<li>6.1.   <a href="#rfc.section.6.1">Media Type Definition</a></li>
<li>6.2.   <a href="#rfc.section.6.2">SDP Parameters</a></li>
<li>6.2.1.   <a href="#rfc.section.6.2.1">Mapping of Media Subtype Parameters to SDP</a></li>
<li>6.2.2.   <a href="#rfc.section.6.2.2">Offer/Answer Considerations</a></li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a></li>
<li>8.   <a href="#rfc.section.8">Congestion Control</a></li>
<li>9.   <a href="#rfc.section.9">IANA Considerations</a></li>
<li>10.   <a href="#rfc.references">References</a></li>
<li><a href="#rfc.authors">Authors' Addresses</a></li>


  </ul>

  <h1 id="rfc.section.1"><a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a></h1>
<p id="rfc.section.1.p.1">This memo describes an RTP payload specification applicable to the transmission of video streams encoded using the VP9 video codec <a href="#I-D.grange-vp9-bitstream">[I-D.grange-vp9-bitstream]</a>. The format described in this document can be used both in peer-to-peer and video conferencing applications.</p>
<p id="rfc.section.1.p.2">TODO: VP9 description.  Please see <a href="#I-D.grange-vp9-bitstream">[I-D.grange-vp9-bitstream]</a>.</p>
<h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a> <a href="#conventions" id="conventions">Conventions, Definitions and Acronyms</a></h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a> <a href="#mediaFormatDescription" id="mediaFormatDescription">Media Format Description</a></h1>
<p id="rfc.section.3.p.1">The VP9 codec can maintain up to eight reference frames, of which up to three can be referenced or updated by any new frame.</p>
<p id="rfc.section.3.p.2">VP9 also allows a reference frame to be resampled and used as a reference for another frame of a different resolution.  This allows internal resolution changes without requiring the use of key frames.</p>
<p id="rfc.section.3.p.3">These features together enable an encoder to implement various forms of coarse-grained scalability, including temporal, spatial and quality scalability modes, as well as combinations of these, without the need for explicit scalable coding tools.</p>
<p id="rfc.section.3.p.4">Temporal layers define different frame rates of video; spatial and quality layers define different and possibly dependent representations of a single input frame.  Spatial layers allow a frame to be encoded at different resolutions, whereas quality layers allow a frame to be encoded at the same resolution but at different qualities (and thus with different amounts of coding error).  VP9 supports quality layers as spatial layers without any resolution changes; hereinafter, the term "spatial layer" is used to represent both spatial and quality layers.</p>
<p id="rfc.section.3.p.5">This payload format specification defines how such temporal and spatial scalability layers can be described and communicated.</p>
<p id="rfc.section.3.p.6">Layers are designed (and MUST be encoded) such that if any layer, and all higher layers, are removed from the bitstream along any of the two dimensions, the remaining bitstream is still correctly decodable.</p>
<p id="rfc.section.3.p.7">For terminology, this document uses the term "layer frame" to refer to a single encoded VP9 frame for a particular resolution/quality, and "super frame" to refer to all the representations (layer frames) at a single instant in time.  A super frame thus consists of one or more layer frames, encoding different spatial layers.</p>
<p id="rfc.section.3.p.8">Within a super frame, a layer frame with spatial layer ID equal to S, where S &gt; 0, can depend on a frame with a lower spatial layer ID.  This "inter-layer" dependency results in additional coding  gain to the traditional "inter-picture" dependency, where a frame depends on previously coded frame in time.  For simplicity, this payload format assumes that, within a super frame if inter-layer dependency is used, a spatial layer S frame can only depend on spatial layer S-1 frame when S &gt; 0.  Additionally, if inter-picture dependency is used, spatial layer S frame is assumed to only depend on prevously coded spatial layer S frame.</p>
<p id="rfc.section.3.p.9">TODO: Describe how simulcast can be supported?</p>
<p id="rfc.section.3.p.10">Given above simplifications for inter-layer and inter-picture dependencies, a flag (the D bit described below) is used to indicate whether a spatial layer S frame depends on spatial layer S-1 frame.  Then a receiver only needs to know the inter-picture dependency structure for a given spatial layer frame in order to determine its decodability.  Two modes of describing the inter-picture dependency structure are possible: "flexible mode" and "non-flexible mode".  An encoder can only switch between the two on the very first packet of a key frame with temporal layer ID equal to 0.  </p>
<p id="rfc.section.3.p.11">In flexible mode, each packet can contain up to 3 reference indices, which identifies all frames referenced by the frame transmitted in the current packet for inter-picture prediction.  This (along with the D bit) enables a receiver to identify if a frame is decodable or not and helps it understand the temporal layer structure so that it can drop packets as it sees fit. Since this is signaled in each packet it makes it possible to have very flexible temporal layer hierarchies and patterns which are changing dynamically.</p>
<p id="rfc.section.3.p.12">In non-flexible mode, the inter-picture dependency (the reference indices) of a group of frames (GOF) MUST be pre-specified as part of the scalability structure (SS) data.  In this mode, each packet will have an index to refer to one of the described frames, from which the frames referenced by the frame transmitted in the current packet for inter-picture prediction can be identified.</p>
<p id="rfc.section.3.p.13">The SS data can also be used to specify the resolution of each spatial layer present in the VP9 stream.</p>
<h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a> <a href="#payloadFormat" id="payloadFormat">Payload Format</a></h1>
<p id="rfc.section.4.p.1">This section describes how the encoded VP9 bitstream is encapsulated in RTP. To handle network losses usage of RTP/AVPF <a href="#RFC4585">[RFC4585]</a> is RECOMMENDED. All integer fields in the specifications are encoded as unsigned integers in network octet order.</p>
<h1 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a> <a href="#RTPHeaderUsage" id="RTPHeaderUsage">RTP Header Usage</a></h1>
<div id="rfc.figure.1"/>
<div id="figureRTPHeader"/>
<p>The general RTP payload format for VP9 is depicted below.</p>
<pre>
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |V=2|P|X|  CC   |M|     PT      |       sequence number         |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                           timestamp                           |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |           synchronization source (SSRC) identifier            |
  +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
  |            contributing source (CSRC) identifiers             |
  |                             ....                              |
  +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
  |            VP9 payload descriptor (integer #bytes)            |
  :                                                               :
  |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                               : VP9 pyld hdr  |               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               |
  |                                                               |
  +                                                               |
  :                   Bytes 2..N of VP9 payload                   :
  |                                                               |
  |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                               :    OPTIONAL RTP padding       |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
          </pre>
<p>The VP9 payload descriptor and VP9 payload header will be described in the next section. OPTIONAL RTP padding MUST NOT be included unless the P bit is set.</p>
<p class="figure">Figure 1</p>
<p/>

<dl>
  <dt>Marker bit (M):</dt>
  <dd style="margin-left: 8">MUST be set to 1 for the final packet of the highest spatial layer frame (the final packet of the super frame), and 0 otherwise.  Unless spatial scalability is in use for this super frame, this will have the same value as the E bit described below.  Note that a MANE MUST set this value to 1 for the target spatial layer frame when shaping out higher spatial layers.</dd>
  <dt>Timestamp:</dt>
  <dd style="margin-left: 8">The RTP timestamp indicates the time when the input frame was sampled, at a clock rate of 90 kHz.  If the input frame is encoded with multiple layer frames, all of the layer frames of the super frame MUST have the same timestamp.</dd>
  <dt>Sequence number:</dt>
  <dd style="margin-left: 8">The sequence numbers are monotonically increasing in order of the encoded bitstream.</dd>
</dl>
<p id="rfc.section.4.1.p.2">The remaining RTP header fields are used as specified in <a href="#RFC3550">[RFC3550]</a>.</p>
<h1 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2.</a> <a href="#VP9payloadDescriptor" id="VP9payloadDescriptor">VP9 Payload Description</a></h1>
<div id="rfc.figure.2"/>
<div id="figureVP9payloadDescriptor"/>
<p>In flexible mode (with the F bit below set to 1), The first octets after the RTP header are the VP9 payload descriptor, with the following structure.</p>
<pre>
      0 1 2 3 4 5 6 7
     +-+-+-+-+-+-+-+-+
     |I|P|L|F|B|E|V|-| (REQUIRED)
     +-+-+-+-+-+-+-+-+
I:   |M| PICTURE ID  | (RECOMMENDED)
     +-+-+-+-+-+-+-+-+
M:   | EXTENDED PID  | (RECOMMENDED)
     +-+-+-+-+-+-+-+-+
L:   |  T  |U|  S  |D| (CONDITIONALLY RECOMMENDED)
     +-+-+-+-+-+-+-+-+                             -\
P,F: | P_DIFF    |X|N| (CONDITIONALLY RECOMMENDED)  .
     +-+-+-+-+-+-+-+-+                              . - up to 3 times
X:   |EXTENDED P_DIFF| (OPTIONAL)                   .
     +-+-+-+-+-+-+-+-+                             -/
V:   | SS            |
     | ..            |
     +-+-+-+-+-+-+-+-+

            </pre>
<p class="figure">Figure 2</p>
<div id="rfc.figure.3"/>
<div id="figureVP9payloadDescriptorNonFlexible"/>
<p>In non-flexible mode (with the F bit below set to 0), The first octets after the RTP header are the VP9 payload descriptor, with the following structure.</p>
<pre>
      0 1 2 3 4 5 6 7
     +-+-+-+-+-+-+-+-+
     |I|P|L|F|B|E|V|-| (REQUIRED)
     +-+-+-+-+-+-+-+-+
I:   |M| PICTURE ID  | (RECOMMENDED)
     +-+-+-+-+-+-+-+-+
M:   | EXTENDED PID  | (RECOMMENDED)
     +-+-+-+-+-+-+-+-+
L:   |GOF_IDX|  S  |D| (CONDITIONALLY RECOMMENDED)
     +-+-+-+-+-+-+-+-+
     |   TL0PICIDX   | (CONDITIONALLY REQUIRED)
     +-+-+-+-+-+-+-+-+
V:   | SS            |
     | ..            |
     +-+-+-+-+-+-+-+-+

            </pre>
<p class="figure">Figure 3</p>
<p/>

<dl>
  <dt>I:</dt>
  <dd style="margin-left: 8">Picture ID (PID) present. When set to one, the OPTIONAL PID MUST be present after the mandatory first octet and specified as below. Otherwise, PID MUST NOT be present.</dd>
  <dt>P:</dt>
  <dd style="margin-left: 8">Inter-picture predicted layer frame.  When set to zero, the layer frame does not utilize inter-picture prediction.  In this case, up-switching to current spatial layer's frame is possible from directly lower spatial layer frame.  P SHOULD also be set to zero when encoding a layer synchronization frame in response to an <a href="#I-D.lennox-avtext-lrr">LRR</a> <cite title="NONE">[I-D.lennox-avtext-lrr]</cite>.</dd>
  <dt>L:</dt>
  <dd style="margin-left: 8">Layer indices present.  When set to one, the one or two octets following the mandatory first octet and the PID (if present) is as described by "Layer indices" below.  If the F bit (described below) is set to 1 (indicating flexible mode), then only one octet is present for the layer indices. Otherwise if the F bit is set to 0 (indicating non-flexible mode), then two octets are present for the layer indices.</dd>
  <dt>F:</dt>
  <dd style="margin-left: 8">Flexible mode.  F set to one indicates flexible mode and if the P bit is also set to one, then the octets following the mandatory first octet, the PID, and layer indices (if present) are as described by "Reference indices" below.  This MUST only be set to one if the I bit is also set to one; if the I bit is set to zero, then this MUST also be set to zero and ignored by receivers.  The value of this F bit CAN ONLY CHANGE on the very first packet of a key picture.  This is a packet with the P bit equal to zero, S or D bit (described below) equal to zero, B bit (described below) equal to 1, and temporal layer ID equal to 0.</dd>
  <dt>B:</dt>
  <dd style="margin-left: 8">Start of a layer frame. MUST be set to 1 if the first payload octet of the RTP packet is the beginning of a new VP9 layer frame, and MUST NOT be 1 otherwise. Note that this layer frame might not be the very first layer frame of a super frame.</dd>
  <dt>E:</dt>
  <dd style="margin-left: 8">End of a layer frame.  MUST be set to 1 for the final RTP packet of a VP9 layer frame, and 0 otherwise.  This enables a decoder to finish decoding the layer frame, where it otherwise may need to wait for the next packet to explicitly know that the layer frame is complete.  Note that, if spatial scalability is in use, more layer frames from the same super frame may follow; see the description of the M bit above.</dd>
  <dt>V:</dt>
  <dd style="margin-left: 8">Scalability structure (SS) data present. When set to one, the OPTIONAL SS data MUST be present in the payload descriptor.  Otherwise, the SS data MUST NOT be present.</dd>
  <dt>-:</dt>
  <dd style="margin-left: 8">Bit reserved for future use. MUST be set to zero and MUST be ignored by the receiver.</dd>
</dl>
<p id="rfc.section.4.2.p.2">The mandatory first octet is followed by the extension data fields that are enabled:</p>

<dl>
  <dt>M:</dt>
  <dd style="margin-left: 8">The most significant bit of the first octet is an extension flag. The field MUST be present if the I bit is equal to one. If set, the PID field MUST contain 15 bits; otherwise, it MUST contain 7 bits. See PID below.</dd>
  <dt>Picture ID (PID):</dt>
  <dd style="margin-left: 8">Picture ID represented in 7 or 15 bits, depending on the M bit. This is a running index of the pictures. The field MUST be present if the I bit is equal to one. If M is set to zero, 7 bits carry the PID; else if M is set to one, 15 bits carry the PID.  The sender may choose between 7 or 15 bits index. The PID SHOULD start on a random number, and MUST wrap after reaching the maximum ID. The receiver MUST NOT assume that the number of bits in PID stay the same through the session.</dd>
  <dt>Layer indices:</dt>
  <dd style="margin-left: 8">This information is optional but recommended whenever encoding with layers.  In the flexible mode (when the F bit is set to 1), one octet is used to specify a layer frame's temporal layer ID (T) and spatial layer ID (S) as shown in <a href="#figureVP9payloadDescriptor">Figure 2</a>.  Additionally, a bit (U) is used to indcate that the current frame is a "switching up point" frame.  Another bit (D) is used to indicate whether inter-layer prediction is used for the current layer frame.</dd>
  <dt></dt>
  <dd style="margin-left: 8">In the non-flexible mode (when the F bit is set to 0), two octets are used as depicted in <a href="#figureVP9payloadDescriptorNonFlexible">Figure 3</a>.  Like the flexible mode, the first byte contains the spatial layer ID and the D bit.  Unlike the flexible mode, instead of the T and U fields, a group of frames index (GOF_IDX) is specified, which can be used to obtain the values of T and U fields from the scalable structure (SS) data described below.  An additional octet to represent the temporal layer 0 index, TL0PICIDX, is present so that all minimally required frames can be tracked.</dd>
  <dt></dt>
  <dd style="margin-left: 8">The T and S fields, whether obtained directly or indirectly from the SS data, indicate the temporal and spatial layers and can help MCUs measure bitrates per layer and can help them make a quick decision on whether to relay a packet or not.  They can also help receivers determine what layers they are currently decoding.  <dl><dt>T:</dt><dd style="margin-left: 8">The temporal layer ID of current frame.  This field is only present in the flexible mode (F = 1).</dd><dt>U:</dt><dd style="margin-left: 8">Switching up point.  This bit is only present in the flexible mode (F = 1).  If this bit is set to 1 for the current frame with temporal layer ID equal to T, then "switch up" to a higher frame rate is possible as subsequent higher temporal layer frames will not depend on any frame before the current frame (in coding time) with temporal layer ID greater than T.</dd><dt>S:</dt><dd style="margin-left: 8">The spatial layer ID of current frame.  Note that frames with spatial layer S &gt; 0 may be dependent on decoded spatial layer S-1 frame within the same super frame.</dd><dt>D:</dt><dd style="margin-left: 8">Inter-layer dependency used.  MUST be set to one if current spatial layer S frame depends on spatial layer S-1 frame of the same super frame.  MUST only be set to zero if current spatial layer S frame does not depend on spatial layer S-1 frame of the same super frame.  For the base layer frame with S equal to 0, this D bit MUST be set to zero.</dd><dt>GOF_IDX:</dt><dd style="margin-left: 8">An index to a frame in the group of frames (GOF) described by the SS data.  This field is only present in the non-flexible mode (F = 0).  In this mode, the SS data SHOULD have been received and the temporal characteristics of each frame must have been speficied as group of frames in the SS data (see the description of "Scalability structure" below).  Here, the values of the T and the U fields are derived from the SS data.  Additionally, the frame's inter-picture dependecy can also be obtained from the SS data.  In the case no SS data has been received or the received SS data does not specify GOF (N_G is set to 0), then GOF_IDX MUST be ignored and the stream is assumed to have no temporal hierarchy with both T and U equal to 0.</dd><dt>TL0PICIDX:</dt><dd style="margin-left: 8">8 bits temporal layer zero index. TL0PICIDX is only present in the non-flexible mode (F = 0).  This is a running index for the temporal base layer frames, i.e., the frames with temporal layer ID (TID) set to 0.  If TID is larger than 0, TL0PICIDX indicates which temporal base layer frame the current frame depends on.  TL0PICIDX MUST be incremented when TID is 0.  The index SHOULD start on a random number, and MUST restart at 0 after reaching the maximum number 255.</dd></dl></dd>
  <dt>Reference indices:</dt>
  <dd style="margin-left: 8">These bytes are optional, but recommended when encoding with temporal layers in the flexible mode.  When P and F are both set to one, then at least one reference index has to be specified as below.  Additional reference indices (total of up to 3 reference indices are allowed) may be specified using the N bit below.  When either P or F is set to zero, then no reference index is specified.  <dl><dt>P_DIFF:</dt><dd style="margin-left: 8">The reference index specified as the relative PID from the current frame.  For example, when P_DIFF=3 on a packet containing the frame with PID 112 means that the frame refers back to the frame with PID 109. This calculation is done modulo the size of the PID field, i.e., either 7 or 15 bits. For most layer structures a 6-bit relative PID will be enough; however, the X bit can be used to refer to older frames.</dd><dt>X:</dt><dd style="margin-left: 8">1 if this layer index has an extended P_DIFF.</dd><dt>N:</dt><dd style="margin-left: 8">1 if there is additional P_DIFF following the current P_DIFF.</dd></dl></dd>
</dl>
<h1 id="rfc.section.4.2.1"><a href="#rfc.section.4.2.1">4.2.1.</a> <a href="#VP9payloadDescriptorSS" id="VP9payloadDescriptorSS">Scalability Structure (SS):</a></h1>
<p id="rfc.section.4.2.1.p.1">The scalability structure (SS) data describes the resolution of each layer frame within a super frame as well as the inter-picture dependencies for a group of frames (GOF).  If the VP9 payload descriptor's "V" bit is set, the SS data is present in the position indicated in <a href="#figureVP9payloadDescriptor">Figure 2</a> and <a href="#figureVP9payloadDescriptorNonFlexible">Figure 3</a>.</p>
<div id="rfc.figure.4"/>
<div id="figureVP9ScalabilityStructure"/>
<pre>
     +-+-+-+-+-+-+-+-+
V:   | N_S |Y|  N_G  |
     +-+-+-+-+-+-+-+-+              -\
Y:   |     WIDTH     | (OPTIONAL)    .
     +               +               .
     |               | (OPTIONAL)    .
     +-+-+-+-+-+-+-+-+               . - N_S + 1 times
     |     HEIGHT    | (OPTIONAL)    .
     +               +               .
     |               | (OPTIONAL)    .
     +-+-+-+-+-+-+-+-+              -/            -\
N_G: |  T  |U| R |-|-| (OPTIONAL)                 .
     +-+-+-+-+-+-+-+-+              -\            . - N_G + 1 times
     |    P_DIFF     | (OPTIONAL)    . - R times  .
     +-+-+-+-+-+-+-+-+              -/            -/
            </pre>
<p class="figure">Figure 4</p>
<p/>

<dl>
  <dt>N_S:</dt>
  <dd style="margin-left: 8">N_S + 1 indicates the number of spatial layers present in the VP9 stream.</dd>
  <dt>Y:</dt>
  <dd style="margin-left: 8">Each spatial layer's frame resolution present.  When set to one, the OPTIONAL WIDTH (2 octets) and HEIGHT (2 octets) MUST be present for each layer frame.  Otherwise, the resolution MUST NOT be present.</dd>
  <dt>N_G:</dt>
  <dd style="margin-left: 8">N_G + 1 indicates the number of frames in a GOF. If N_G is greater than 0, then the SS data allows the inter-picture dependency structure of the VP9 stream to be pre-declared, rather than indicating it on the fly with every packet.  If N_G is greater than 0, then for N_G + 1 pictures in the GOF, each frame's temporal layer ID (T), switch up point (U), and the R reference indices (P_DIFFs) are specified.</dd>
  <dt></dt>
  <dd style="margin-left: 8">N_G=0 indicates that either there is only one temporal layer or no fixed inter-picture dependency information is present going forward in the bitstream.</dd>
  <dt></dt>
  <dd style="margin-left: 8">Note that for a given super frame, all layer frames follow the same inter-picture dependency structure.  However, the frame rate of each spatial layer can be different from each other and this can be controlled with the use of the D bit described above.  The specified dependency structure in the SS data MUST be for the highest frame rate layer.</dd>
</dl>
<p id="rfc.section.4.2.1.p.3">In a scalable stream sent with a fixed pattern, the SS data SHOULD be included in the first packet of every key frame. This is a packet with P bit equal to zero, S or D bit equal to zero, B bit equal to 1, and temporal layer ID (TID) equal to 0. The SS data SHOULD also be included in the first packet of the first frame in which the SS changes.  If the SS data is included in a frame with TID not equal to 0, it MUST also be repeated in the first packet of the first frame with a lower TID, until TID equals to 0.</p>
<h1 id="rfc.section.4.3"><a href="#rfc.section.4.3">4.3.</a> <a href="#VP9payloadHeader" id="VP9payloadHeader">VP9 Payload Header</a></h1>
<p id="rfc.section.4.3.p.1">TODO: need to describe VP9 payload header.</p>
<h1 id="rfc.section.4.4"><a href="#rfc.section.4.4">4.4.</a> Frame Fragmentation</h1>
<p id="rfc.section.4.4.p.1">VP9 frames are fragmented into packets, in RTP sequence number order, beginning with a packet with the B bit set, and ending with a packet with the RTP marker bit set.  There is no mechanism for finer-grained access to parts of a VP9 frame.</p>
<h1 id="rfc.section.4.5"><a href="#rfc.section.4.5">4.5.</a> Examples of VP9 RTP Stream</h1>
<p id="rfc.section.4.5.p.1">TODO</p>
<h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a> <a href="#RPSIandSLI" id="RPSIandSLI">Using VP9 with RPSI and SLI Feedback</a></h1>
<p id="rfc.section.5.p.1">The VP9 payload descriptor defined in <a href="#VP9payloadDescriptor">Section 4.2</a> above contains an optional PictureID parameter. One use of this parameter is included to enable use of reference picture selection index (RPSI) and slice loss indication (SLI), both defined in <a href="#RFC4585">[RFC4585]</a>.</p>
<h1 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1.</a> <a href="#RPSI" id="RPSI">RPSI</a></h1>
<p id="rfc.section.5.1.p.1">TODO: Update to indicate which frame within the picture.</p>
<p id="rfc.section.5.1.p.2">The reference picture selection index is a payload-specific feedback message defined within the RTCP-based feedback format. The RPSI message is generated by a receiver and can be used in two ways.  Either it can signal a preferred reference picture when a loss has been detected by the decoder -- preferably then a reference that the decoder knows is perfect -- or, it can be used as positive feedback information to acknowledge correct decoding of certain reference pictures. The positive feedback method is useful for VP9 used as unicast. The use of RPSI for VP9 is preferably combined with a special update pattern of the codec's two special reference frames -- the golden frame and the altref frame -- in which they are updated in an alternating leapfrog fashion. When a receiver has received and correctly decoded a golden or altref frame, and that frame had a PictureID in the payload descriptor, the receiver can acknowledge this simply by sending an RPSI message back to the sender. The message body (i.e., the "native RPSI bit string" in <a href="#RFC4585">[RFC4585]</a>) is simply the PictureID of the received frame.</p>
<h1 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2.</a> <a href="#SLI" id="SLI">SLI</a></h1>
<p id="rfc.section.5.2.p.1">TODO: Update to indicate which frame within the picture.</p>
<p id="rfc.section.5.2.p.2">The slice loss indication is another payload-specific feedback message defined within the RTCP-based feedback format. The SLI message is generated by the receiver when a loss or corruption is detected in a frame. The format of the SLI message is as follows <a href="#RFC4585">[RFC4585]</a>:</p>
<div id="rfc.figure.5"/>
<div id="figureSLIHeader"/>
<pre>
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |         First           |        Number           | PictureID |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
            </pre>
<p class="figure">Figure 5</p>
<p id="rfc.section.5.2.p.3">Here, First is the macroblock address (in scan order) of the first lost block and Number is the number of lost blocks. PictureID is the six least significant bits of the codec-specific picture identifier in which the loss or corruption has occurred. For VP9, this codec-specific identifier is naturally the PictureID of the current frame, as read from the payload descriptor. If the payload descriptor of the current frame does not have a PictureID, the receiver MAY send the last received PictureID+1 in the SLI message. The receiver MAY set the First parameter to 0, and the Number parameter to the total number of macroblocks per frame, even though only parts of the frame is corrupted. When the sender receives an SLI message, it can make use of the knowledge from the latest received RPSI message. Knowing that the last golden or altref frame was successfully received, it can encode the next frame with reference to that established reference.</p>
<h1 id="rfc.section.5.3"><a href="#rfc.section.5.3">5.3.</a> Example</h1>
<p id="rfc.section.5.3.p.1">TODO: this example is copied from the VP8 payload format specification, and has not been updated for VP9.  It may be incorrect.</p>
<p id="rfc.section.5.3.p.2">The use of RPSI and SLI is best illustrated in an example. In this example, the encoder may not update the altref frame until the last sent golden frame has been acknowledged with an RPSI message. If an update is not received within some time, a new golden frame update is sent instead. Once the new golden frame is established and acknowledged, the same rule applies when updating the altref frame.</p>
<div id="rfc.table.1"/>
<div id="table_example_timing"/>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <caption>Example signaling between sender and receiver</caption>
  <thead>
    <tr>
      <th class="left">Event</th>
      <th class="left">Sender</th>
      <th class="left">Receiver</th>
      <th class="left">Established reference</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="left">1000</td>
      <td class="left">Send golden frame PictureID = 0</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left"/>
      <td class="left"/>
      <td class="left">Receive and decode golden frame</td>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">1001</td>
      <td class="left"/>
      <td class="left">Send RPSI(0)</td>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">1002</td>
      <td class="left">Receive RPSI(0)</td>
      <td class="left"/>
      <td class="left">golden</td>
    </tr>
    <tr>
      <td class="left">...</td>
      <td class="left">(sending regular frames)</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">1100</td>
      <td class="left">Send altref frame PictureID = 100</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left"/>
      <td class="left"/>
      <td class="left">Altref corrupted or lost</td>
      <td class="left">golden</td>
    </tr>
    <tr>
      <td class="left">1101</td>
      <td class="left"/>
      <td class="left">Send SLI(100)</td>
      <td class="left">golden</td>
    </tr>
    <tr>
      <td class="left">1102</td>
      <td class="left">Receive SLI(100)</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">1103</td>
      <td class="left">Send frame with reference to golden</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left"/>
      <td class="left"/>
      <td class="left">Receive and decode frame (decoder state restored)</td>
      <td class="left">golden</td>
    </tr>
    <tr>
      <td class="left">...</td>
      <td class="left">(sending regular frames)</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">1200</td>
      <td class="left">Send altref frame PictureID = 200</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left"/>
      <td class="left"/>
      <td class="left">Receive and decode altref frame</td>
      <td class="left">golden</td>
    </tr>
    <tr>
      <td class="left">1201</td>
      <td class="left"/>
      <td class="left">Send RPSI(200)</td>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">1202</td>
      <td class="left">Receive RPSI(200)</td>
      <td class="left"/>
      <td class="left">altref</td>
    </tr>
    <tr>
      <td class="left">...</td>
      <td class="left">(sending regular frames)</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">1300</td>
      <td class="left">Send golden frame PictureID = 300</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left"/>
      <td class="left"/>
      <td class="left">Receive and decode golden frame</td>
      <td class="left">altref</td>
    </tr>
    <tr>
      <td class="left">1301</td>
      <td class="left"/>
      <td class="left">Send RPSI(300)</td>
      <td class="left">altref</td>
    </tr>
    <tr>
      <td class="left">1302</td>
      <td class="left">RPSI lost</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">1400</td>
      <td class="left">Send golden frame PictureID = 400</td>
      <td class="left"/>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left"/>
      <td class="left"/>
      <td class="left">Receive and decode golden frame</td>
      <td class="left">altref</td>
    </tr>
    <tr>
      <td class="left">1401</td>
      <td class="left"/>
      <td class="left">Send RPSI(400)</td>
      <td class="left"/>
    </tr>
    <tr>
      <td class="left">1402</td>
      <td class="left">Receive RPSI(400)</td>
      <td class="left"/>
      <td class="left">golden</td>
    </tr>
  </tbody>
</table>
<p id="rfc.section.5.3.p.3">Note that the scheme is robust to loss of the feedback messages. If the RPSI is lost, the sender will try to update the golden (or altref) again after a while, without releasing the established reference.  Also, if an SLI is lost, the receiver can keep sending SLI messages at any interval allowed by the RTCP sending timing restrictions as specified in <a href="#RFC4585">[RFC4585]</a>, as long as the picture is corrupted.</p>
<h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a> <a href="#payloadFormatParameters" id="payloadFormatParameters">Payload Format Parameters</a></h1>
<p id="rfc.section.6.p.1">This payload format has two required parameters.</p>
<h1 id="rfc.section.6.1"><a href="#rfc.section.6.1">6.1.</a> <a href="#mediaTypeRegistration" id="mediaTypeRegistration">Media Type Definition</a></h1>
<p id="rfc.section.6.1.p.1">This registration is done using the template defined in <a href="#RFC6838">[RFC6838]</a> and following <a href="#RFC4855">[RFC4855]</a>. </p>

<dl>
  <dt>Type name:</dt>
  <dd style="margin-left: 8">video</dd>
  <dt>Subtype name:</dt>
  <dd style="margin-left: 8">VP9</dd>
  <dt>Required parameters:</dt>
  <dd style="margin-left: 8"><br/> These parameters MUST be used to signal the capabilities of a receiver implementation. These parameters MUST NOT be used for any other purpose. <dl><dt>max-fr:</dt><dd style="margin-left: 8">The value of max-fr is an integer indicating the maximum frame rate in units of frames per second that the decoder is capable of decoding.</dd><dt>max-fs:</dt><dd style="margin-left: 8">The value of max-fs is an integer indicating the maximum frame size in units of macroblocks that the decoder is capable of decoding.</dd><dt></dt><dd style="margin-left: 8">The decoder is capable of decoding this frame size as long as the width and height of the frame in macroblocks are less than int(sqrt(max-fs * 8)) - for instance, a max-fs of 1200 (capable of supporting 640x480 resolution) will support widths and heights up to 1552 pixels (97 macroblocks).</dd></dl></dd>
  <dt>Optional parameters:</dt>
  <dd style="margin-left: 8">none</dd>
  <dt>Encoding considerations:</dt>
  <dd style="margin-left: 8"><br/> This media type is framed in RTP and contains binary data; see Section 4.8 of <a href="#RFC6838">[RFC6838]</a>.</dd>
  <dt>Security considerations:</dt>
  <dd style="margin-left: 8">See <a href="#securityConsiderations">Section 7</a> of RFC xxxx. <br/> [RFC Editor: Upon publication as an RFC, please replace "XXXX" with the number assigned to this document and remove this note.]</dd>
  <dt>Interoperability considerations:</dt>
  <dd style="margin-left: 8">None.</dd>
  <dt>Published specification:</dt>
  <dd style="margin-left: 8">VP9 bitstream format <a href="#I-D.grange-vp9-bitstream">[I-D.grange-vp9-bitstream]</a> and RFC XXXX. <br/> [RFC Editor: Upon publication as an RFC, please replace "XXXX" with the number assigned to this document and remove this note.] <br/></dd>
  <dt>Applications which use this media type:</dt>
  <dd style="margin-left: 8"><br/> For example: Video over IP, video conferencing.</dd>
  <dt>Additional information:</dt>
  <dd style="margin-left: 8">None.</dd>
  <dt>Person &amp; email address to contact for further information:</dt>
  <dd style="margin-left: 8"><br/> TODO [Pick a contact]</dd>
  <dt>Intended usage:</dt>
  <dd style="margin-left: 8">COMMON</dd>
  <dt>Restrictions on usage:</dt>
  <dd style="margin-left: 8"><br/> This media type depends on RTP framing, and hence is only defined for transfer via RTP <a href="#RFC3550">[RFC3550]</a>.</dd>
  <dt>Author:</dt>
  <dd style="margin-left: 8">TODO [Pick a contact]</dd>
  <dt>Change controller:</dt>
  <dd style="margin-left: 8"><br/> IETF Payload Working Group delegated from the IESG.</dd>
</dl>
<h1 id="rfc.section.6.2"><a href="#rfc.section.6.2">6.2.</a> SDP Parameters</h1>
<p id="rfc.section.6.2.p.1">The receiver MUST ignore any fmtp parameter unspecified in this memo.</p>
<h1 id="rfc.section.6.2.1"><a href="#rfc.section.6.2.1">6.2.1.</a> Mapping of Media Subtype Parameters to SDP</h1>
<p id="rfc.section.6.2.1.p.1">The media type video/VP9 string is mapped to fields in the Session Description Protocol (SDP) <a href="#RFC4566">[RFC4566]</a> as follows: </p>

<ul>
  <li>The media name in the "m=" line of SDP MUST be video.</li>
  <li>The encoding name in the "a=rtpmap" line of SDP MUST be VP9 (the media subtype).</li>
  <li>The clock rate in the "a=rtpmap" line MUST be 90000.</li>
  <li>The parameters "max-fs", and "max-fr", MUST be included in the "a=fmtp" line of SDP. These parameters are expressed as a media subtype string, in the form of a semicolon separated list of parameter=value pairs.</li>
</ul>
<h1 id="rfc.section.6.2.1.1"><a href="#rfc.section.6.2.1.1">6.2.1.1.</a> Example</h1>
<p id="rfc.section.6.2.1.1.p.1">An example of media representation in SDP is as follows:</p>
<p id="rfc.section.6.2.1.1.p.2">m=video 49170 RTP/AVPF 98<br/> a=rtpmap:98 VP9/90000<br/> a=fmtp:98 max-fr=30; max-fs=3600;<br/></p>
<h1 id="rfc.section.6.2.2"><a href="#rfc.section.6.2.2">6.2.2.</a> Offer/Answer Considerations</h1>
<p id="rfc.section.6.2.2.p.1">TODO: Update this for VP9</p>
<h1 id="rfc.section.7"><a href="#rfc.section.7">7.</a> <a href="#securityConsiderations" id="securityConsiderations">Security Considerations</a></h1>
<p id="rfc.section.7.p.1">RTP packets using the payload format defined in this specification are subject to the security considerations discussed in the RTP specification <a href="#RFC3550">[RFC3550]</a>, and in any applicable RTP profile. The main security considerations for the RTP packet carrying the RTP payload format defined within this memo are confidentiality, integrity and source authenticity. Confidentiality is achieved by encryption of the RTP payload. Integrity of the RTP packets through suitable cryptographic integrity protection mechanism. Cryptographic system may also allow the authentication of the source of the payload. A suitable security mechanism for this RTP payload format should provide confidentiality, integrity protection and at least source authentication capable of determining if an RTP packet is from a member of the RTP session or not. Note that the appropriate mechanism to provide security to RTP and payloads following this memo may vary. It is dependent on the application, the transport, and the signaling protocol employed.  Therefore a single mechanism is not sufficient, although if suitable the usage of SRTP <a href="#RFC3711">[RFC3711]</a> is recommended. This RTP payload format and its media decoder do not exhibit any significant non-uniformity in the receiver-side computational complexity for packet processing, and thus are unlikely to pose a denial-of-service threat due to the receipt of pathological data. Nor does the RTP payload format contain any active content.</p>
<h1 id="rfc.section.8"><a href="#rfc.section.8">8.</a> <a href="#congestionControl" id="congestionControl">Congestion Control</a></h1>
<p id="rfc.section.8.p.1">Congestion control for RTP SHALL be used in accordance with RFC 3550 <a href="#RFC3550">[RFC3550]</a>, and with any applicable RTP profile; e.g., RFC 3551 <a href="#RFC3551">[RFC3551]</a>. The congestion control mechanism can, in a real-time encoding scenario, adapt the transmission rate by instructing the encoder to encode at a certain target rate. Media aware network elements MAY use the information in the VP9 payload descriptor in <a href="#VP9payloadDescriptor">Section 4.2</a> to identify non-reference frames and discard them in order to reduce network congestion. Note that discarding of non-reference frames cannot be done if the stream is encrypted (because the non-reference marker is encrypted).</p>
<h1 id="rfc.section.9"><a href="#rfc.section.9">9.</a> <a href="#IANAConsiderations" id="IANAConsiderations">IANA Considerations</a></h1>
<p id="rfc.section.9.p.1">The IANA is requested to register the following values:<br/> - Media type registration as described in <a href="#mediaTypeRegistration">Section 6.1</a>.</p>
<h1 id="rfc.references"><a href="#rfc.references">10.</a> References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="I-D.grange-vp9-bitstream">[I-D.grange-vp9-bitstream]</b>
      </td>
      <td class="top"><a>Grange, A.</a> and <a>H. Alvestrand</a>, "<a href="http://tools.ietf.org/html/draft-grange-vp9-bitstream-00">A VP9 Bitstream Overview</a>", Internet-Draft draft-grange-vp9-bitstream-00, February 2013.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.lennox-avtext-lrr">[I-D.lennox-avtext-lrr]</b>
      </td>
      <td class="top"><a>Lennox, J.</a>, <a>Uberti, J.</a>, <a>Holmer, S.</a> and <a>M. Flodman</a>, "<a href="http://tools.ietf.org/html/draft-lennox-avtext-lrr-00">The Layer Refresh Request (LRR) RTCP Feedback MessageVideo</a>", Internet-Draft draft-lennox-avtext-lrr-00, March 2015.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC2119">[RFC2119]</b>
      </td>
      <td class="top"><a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3550">[RFC3550]</b>
      </td>
      <td class="top"><a>Schulzrinne, H.</a>, <a>Casner, S.</a>, <a>Frederick, R.</a> and <a>V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>", STD 64, RFC 3550, July 2003.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3551">[RFC3551]</b>
      </td>
      <td class="top"><a>Schulzrinne, H.</a> and <a>S. Casner</a>, "<a href="http://tools.ietf.org/html/rfc3551">RTP Profile for Audio and Video Conferences with Minimal Control</a>", STD 65, RFC 3551, July 2003.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3711">[RFC3711]</b>
      </td>
      <td class="top"><a>Baugher, M.</a>, <a>McGrew, D.</a>, <a>Naslund, M.</a>, <a>Carrara, E.</a> and <a>K. Norrman</a>, "<a href="http://tools.ietf.org/html/rfc3711">The Secure Real-time Transport Protocol (SRTP)</a>", RFC 3711, March 2004.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC4566">[RFC4566]</b>
      </td>
      <td class="top"><a>Handley, M.</a>, <a>Jacobson, V.</a> and <a>C. Perkins</a>, "<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>", RFC 4566, July 2006.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC4585">[RFC4585]</b>
      </td>
      <td class="top"><a>Ott, J.</a>, <a>Wenger, S.</a>, <a>Sato, N.</a>, <a>Burmeister, C.</a> and <a>J. Rey</a>, "<a href="http://tools.ietf.org/html/rfc4585">Extended RTP Profile for Real-time Transport Control Protocol (RTCP)-Based Feedback (RTP/AVPF)</a>", RFC 4585, July 2006.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC4855">[RFC4855]</b>
      </td>
      <td class="top"><a>Casner, S.</a>, "<a href="http://tools.ietf.org/html/rfc4855">Media Type Registration of RTP Payload Formats</a>", RFC 4855, February 2007.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6838">[RFC6838]</b>
      </td>
      <td class="top"><a>Freed, N.</a>, <a>Klensin, J.</a> and <a>T. Hansen</a>, "<a href="http://tools.ietf.org/html/rfc6838">Media Type Specifications and Registration Procedures</a>", BCP 13, RFC 6838, January 2013.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.authors">
  <a href="#rfc.authors">Authors' Addresses</a>
</h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Justin Uberti</span> 
	  <span class="n hidden">
		<span class="family-name">Uberti</span>
	  </span>
	</span>
	<span class="org vcardline">Google, Inc.</span>
	<span class="adr">
	  <span class="vcardline">747 6th Street South</span>

	  <span class="vcardline">
		<span class="locality">Kirkland</span>,  
		<span class="region">WA</span> 
		<span class="code">98033</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:justin@uberti.name">justin@uberti.name</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Stefan Holmer</span> 
	  <span class="n hidden">
		<span class="family-name">Holmer</span>
	  </span>
	</span>
	<span class="org vcardline">Google, Inc.</span>
	<span class="adr">
	  <span class="vcardline">Kungsbron 2</span>

	  <span class="vcardline">
		<span class="locality">Stockholm</span>,  
		<span class="region"></span>
		<span class="code">111 22</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	
  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Magnus Flodman</span> 
	  <span class="n hidden">
		<span class="family-name">Flodman</span>
	  </span>
	</span>
	<span class="org vcardline">Google, Inc.</span>
	<span class="adr">
	  <span class="vcardline">Kungsbron 2</span>

	  <span class="vcardline">
		<span class="locality">Stockholm</span>,  
		<span class="region"></span>
		<span class="code">111 22</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	
  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jonathan Lennox</span> 
	  <span class="n hidden">
		<span class="family-name">Lennox</span>
	  </span>
	</span>
	<span class="org vcardline">Vidyo, Inc.</span>
	<span class="adr">
	  <span class="vcardline">433 Hackensack Avenue</span>
<span class="vcardline">Seventh Floor</span>

	  <span class="vcardline">
		<span class="locality">Hackensack</span>,  
		<span class="region">NJ</span> 
		<span class="code">07601</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jonathan@vidyo.com">jonathan@vidyo.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Danny Hong</span> 
	  <span class="n hidden">
		<span class="family-name">Hong</span>
	  </span>
	</span>
	<span class="org vcardline">Vidyo, Inc.</span>
	<span class="adr">
	  <span class="vcardline">433 Hackensack Avenue</span>
<span class="vcardline">Seventh Floor</span>

	  <span class="vcardline">
		<span class="locality">Hackensack</span>,  
		<span class="region">NJ</span> 
		<span class="code">07601</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:danny@vidyo.com">danny@vidyo.com</a></span>

  </address>
</div>

</body>
</html>
